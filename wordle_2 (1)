import random
# To install colorama, run the following command in your VS Code terminal:
# python3 -m pip install colorama
from colorama import Fore, Back, init
init(autoreset=True) #Ends color formatting after each print statement

from wordle_secret_words import get_secret_words
from valid_wordle_guesses import get_valid_wordle_guesses
from colorama import init, Fore, Back, Style

def valid_guess(guess: str) -> bool:
     if guess.upper() in get_valid_wordle_guesses():
          return True
     else:
          return False
    
def get_feedback(guess: str, secret_word: str) -> str:
    returned_value = ['-','-','-','-','-']
    guess = guess.lower()
    guess1 = guess.upper()
    secret_word = secret_word.lower()

    guess = [*guess]
    secret_word = [*secret_word]
     
    temp_secret_word = [*secret_word]

    for i in range(0,len(guess)):
            if guess[i] == secret_word[i]:
                returned_value[i] = guess[i].upper()
                temp_secret_word[i] = '*'
                
    for i in range(0,len(guess)):
         for m in range(len(temp_secret_word)):
              if guess[i] == temp_secret_word[m] and not returned_value[i].isalpha():
                   returned_value[i] = guess[i]
                   temp_secret_word[m] = '*'
    
    precolor = ''.join(returned_value)
    colorsvar = ""
    tempscore = 0
    counter = 0
    init()

    for i in precolor: 
         if i == '-':
              colorsvar = colorsvar + Fore.WHITE + Back.LIGHTBLACK_EX + guess1[counter] + Style.RESET_ALL
         elif ord(i) > 90:
              colorsvar = colorsvar + Fore.WHITE + Back.YELLOW + guess1[counter] + Style.RESET_ALL
         else:
              colorsvar = colorsvar + Fore.WHITE + Back.GREEN + guess1[counter] +Style.RESET_ALL
              tempscore+=1
         counter+=1
    print(colorsvar)
    return tempscore


def get_AI_guess(guesses: list[str], feedback: list[str], secret_words: set[str], valid_guesses: set[str]) -> str:
    '''Analyzes feedback from previous guesses/feedback (if any) to make a new guess
        
        Args:
         guesses (list): A list of string guesses, which could be empty
         feedback (list): A list of feedback strings, which could be empty
         secret_words (set): A set of potential secret words
         valid_guesses (set): A set of valid AI guesses
        
        Returns:
         str: a valid guess that is exactly 5 uppercase letters
    '''
    ### BEGIN SOLUTION
    guess = random.choice(list(get_secret_words()))
    return guess


    ### END SOLUTION 

# TODO: Define and implement your own functions!
import time
import sys

if __name__ == "__main__":
    # TODO: Write your own code to call your functions here
    secret_word = random.choice(list(get_secret_words()))
    guess=''
    'secret_word.lower() != guess.lower():'
    guess_count = 0
    while guess_count <= 4:

        guess = input('Enter guess: ') 

        while valid_guess(guess) == False:
             print("Input invalid, ensure no special characters, incorrect lengths or numbers and try again: ")
             guess = input('Enter guess: ') 
        get_feedback(guess, secret_word)

        guess_count += 1
    

        if secret_word.lower() == guess.lower():
            animation = "◕‿◕ ◠‿◠"
            print("     You win!!!",end="")
            start_time = time.time()
            while True:
                for i in range(0,9,4):
                    time.sleep(0.2) 
                    sys.stdout.write("\r" + animation[i:i+4 % len(animation)])
                    sys.stdout.flush()
                if time.time() - start_time > 10:  # The animation will last for 10 seconds
                    break
            break
        
    if guess_count == 5 and secret_word != guess:
        print('All out bozo! The word was ', secret_word, ':(') 

 
    pass